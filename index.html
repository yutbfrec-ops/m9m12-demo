<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>M9/M12 èƒ½åŠ›ç›¤é» Beta Demoï¼ˆæ–¹æ¡ˆBï¼šå¤šä¸»é¡Œé¡Œåº« + åˆ†ä¸»é¡Œè‰ç¨¿ï¼‰</title>
  <style>
    :root{
      --bg:#F6F8FC;
      --ink:#0B1220;
      --muted:#5C667A;
      --line:#E6EAF2;
      --card:#FFFFFF;
      --primary:#2F6FED;
      --primary-weak:#EAF1FF;
      --shadow: 0 18px 60px rgba(12, 24, 46, .18);
      --frame-1:#6F7785; /* ç°æ¡† */
      --frame-2:#3E4654;
      --frame-inner:#0E1626;
      --radius: 22px;
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:var(--font);
      color:var(--ink);
      background:
        radial-gradient(1100px 600px at 20% -20%, rgba(47,111,237,.12), transparent 60%),
        radial-gradient(900px 500px at 95% 20%, rgba(245,158,11,.10), transparent 55%),
        var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 10px; /* è®“æ‰‹æ©Ÿç€è¦½å™¨æ›´æ¥è¿‘æ»¿ç‰ˆ */
    }

    /* å¤–æ¡†ï¼ˆç°è‰²ï¼‰*/
    .phone{
      width: min(98vw, 460px);
      height: min(96vh, 980px);
      background: linear-gradient(180deg, var(--frame-1), var(--frame-2));
      border-radius: 44px;
      padding: 14px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    /* å…§æ¡†ï¼ˆæ·±è‰²é‚Šï¼‰*/
    .shell{
      width:100%;
      height:100%;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.12));
      border-radius: 36px;
      padding: 10px;
      position: relative;
    }

    /* è¢å¹• */
    .screen{
      width:100%;
      height:100%;
      background: #fff;
      border-radius: 28px;
      overflow:hidden;
      position:relative;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
    }

    /* å‡ç‹€æ…‹åˆ—ï¼ˆä¸è·ŸçœŸå¯¦æ‰‹æ©Ÿæ™‚é–“åŒæ­¥ï¼šå›ºå®š 9:41ï¼‰ */
    .statusbar{
      position:absolute;
      top:0;
      left:0;
      right:0;
      height: 44px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 16px;
      font-size: 14px;
      color: rgba(0,0,0,.78);
      pointer-events:none;
    }
    .sb-right{
      display:flex; gap:8px; align-items:center;
      font-size: 12px;
      opacity:.9;
    }
    .pill{
      width: 70px; height: 5px;
      background: rgba(0,0,0,.14);
      border-radius:999px;
      margin: 10px auto 0 auto;
    }

    /* APP å…§å®¹å®¹å™¨ */
    .app{
      position:absolute;
      top:44px; left:0; right:0; bottom:0;
      padding: 16px 18px 18px 18px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      background: #fff;
    }

    .topnav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin: 4px 0 10px 0;
      color: var(--muted);
      font-weight:600;
    }
    .topnav .left, .topnav .right{
      display:flex; align-items:center; gap:8px;
      cursor:pointer;
      user-select:none;
    }
    .topnav .mid{ font-weight:700; color: var(--muted); }

    h1{
      margin: 8px 0 6px 0;
      font-size: 34px;
      line-height: 1.12;
      letter-spacing: -0.02em;
    }
    p{
      margin: 0 0 14px 0;
      color: var(--muted);
      line-height: 1.55;
    }

    .input{
      width:100%;
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 14px 14px;
      font-size: 18px;
      outline:none;
      background: #fff;
      box-shadow: 0 1px 0 rgba(0,0,0,.02);
    }

    .chips{ display:flex; flex-wrap:wrap; gap:10px; margin: 10px 0 16px 0; }
    .chip{
      border:1px solid #D7DDEA;
      padding: 10px 14px;
      border-radius: 999px;
      background:#fff;
      font-weight:700;
      color:#243047;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      border-color: rgba(47,111,237,.55);
      background: rgba(47,111,237,.12);
      color:#1D4ED8;
    }

    .rowlink{
      display:flex; align-items:center; justify-content:space-between;
      padding: 12px 2px;
      border-top:1px solid transparent;
      margin-top: 6px;
      color:#163B7A;
      font-weight:800;
      cursor:pointer;
      user-select:none;
    }
    .rowlink span{ color: var(--muted); font-weight:700; }

    .illus{
      height: 160px;
      border-radius: 18px;
      background:
        radial-gradient(90px 90px at 40% 30%, rgba(47,111,237,.18), transparent 60%),
        radial-gradient(120px 120px at 20% 70%, rgba(245,158,11,.18), transparent 60%),
        radial-gradient(140px 140px at 75% 60%, rgba(99,102,241,.14), transparent 60%),
        linear-gradient(180deg, #F7FAFF, #FFFFFF);
      border: 1px solid #EEF2FB;
      display:flex;
      align-items:center;
      justify-content:center;
      color: rgba(0,0,0,.25);
      margin: 6px 0 14px 0;
      position:relative;
      overflow:hidden;
    }
    .illus:after{
      content:"";
      position:absolute;
      width: 120px; height: 120px;
      border-radius:999px;
      background: rgba(47,111,237,.10);
      left: 30px; bottom: -40px;
      filter: blur(0px);
    }
    .illus .plus{
      position:absolute;
      width: 44px; height:44px;
      border-radius:999px;
      background: rgba(47,111,237,.14);
      right: 44px; top: 52px;
      display:flex; align-items:center; justify-content:center;
      color:#2F6FED;
      font-size: 24px;
      font-weight:900;
    }

    .btn{
      width:100%;
      border:0;
      border-radius: 16px;
      padding: 16px 16px;
      font-size: 18px;
      font-weight: 900;
      cursor:pointer;
      background: var(--primary);
      color:#fff;
      box-shadow: 0 10px 24px rgba(47,111,237,.26);
    }
    .btn.secondary{
      background:#F2F5FB;
      color:#334155;
      box-shadow:none;
      border:1px solid #E6EAF2;
      margin-top: 10px;
    }
    .btn.ghost{
      background:#fff;
      color:#334155;
      box-shadow:none;
      border:1px solid #E6EAF2;
      margin-top: 10px;
    }

    .hint{
      margin-top: 12px;
      font-size: 14px;
      color: #6B7280;
      line-height: 1.55;
    }

    .card{
      background: var(--card);
      border: 1px solid #E6EAF2;
      border-radius: 18px;
      padding: 14px 14px;
      box-shadow: 0 8px 28px rgba(18, 38, 75, .06);
      margin: 12px 0;
    }
    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      color: var(--muted);
      font-weight:700;
      font-size: 14px;
    }
    .bigscore{
      display:flex;
      align-items:flex-start;
      gap: 12px;
      margin-top: 10px;
    }
    .bigscore .n{
      font-size: 52px;
      font-weight: 950;
      line-height: 1;
    }
    .bigscore .txt{
      font-weight: 900;
      font-size: 18px;
      margin-top: 6px;
    }
    .stars{ display:flex; gap:4px; margin-top: 6px; }
    .star{
      width: 16px; height:16px;
      clip-path: polygon(50% 0%, 62% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 38% 35%);
      background: #D5DAE6;
    }
    .star.on{ background: #F59E0B; }

    .list{
      margin-top: 10px;
      padding-top: 8px;
      border-top:1px solid #EEF2FB;
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 2px;
      font-weight:800;
      color:#23314A;
    }
    .row .label{ font-weight:900; }
    .row .stars{ margin:0; }

    .section-title{
      margin: 14px 0 8px 0;
      font-size: 20px;
      font-weight: 950;
      color:#1F2A44;
    }

    .pillbox{
      border:1px solid #E6EAF2;
      border-radius: 14px;
      padding: 12px;
      background:#fff;
      color:#334155;
      line-height:1.55;
    }

    .actions2{
      display:flex; gap:10px;
      margin-top: 12px;
    }
    .actions2 .btn{ flex:1; }
    .actions2 .btn.secondary{ margin-top:0; }

    /* build é¡¯ç¤ºï¼šæ¯é å›ºå®šåœ¨å³ä¸Šè§’å€å¡Šï¼ˆé è¿‘ç‹€æ…‹åˆ—ä¸‹æ–¹ï¼‰ */
    .build{
      position:absolute;
      top: 48px;
      right: 16px;
      font-size: 12px;
      color: rgba(0,0,0,.55);
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(230,234,242,.9);
      padding: 6px 8px;
      border-radius: 10px;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      user-select:text;
    }

    /* æ›´è²¼è¿‘æ»¿ç‰ˆæ™‚ï¼Œé¿å…å·¦å³ç•™ç™½å¤ªå¤š */
    @media (max-width: 520px){
      body{ padding: 6px; }
      .phone{ width: 98vw; height: 96vh; border-radius: 40px; }
      .shell{ border-radius: 32px; }
      .screen{ border-radius: 26px; }
    }
  </style>
</head>

<body>
  <div class="phone" role="application" aria-label="M9/M12 Demo">
    <div class="shell">
      <div class="screen">
        <div class="statusbar">
          <div>9:41</div>
          <div class="sb-right">
            <span>â–®â–®â–®</span><span>âš¡</span><span>ğŸ”‹</span>
          </div>
        </div>
        <div class="pill"></div>

        <div class="build" id="buildText"></div>
        <div class="app" id="app"></div>
      </div>
    </div>
  </div>

  <script>
    /***********************
     * Build / Versioning
     ***********************/
    const BUILD = {
      product: "UIA-BANKB",
      version: "v1.0.1",
      date: "2025-12-29",
      buildNo: "B01"
    };

    /***********************
     * Helpers (safe)
     ***********************/
    function el(tag, cls, ...parts){
      const e = document.createElement(tag);
      if (cls) e.className = cls;

      for (const p of parts){
        if (p === null || p === undefined) continue;

        if (typeof p === "string"){
          e.insertAdjacentHTML("beforeend", p);
          continue;
        }
        if (p instanceof Node){
          e.appendChild(p);
          continue;
        }
        e.appendChild(document.createTextNode(String(p)));
      }
      return e;
    }

    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

    function stars(n){
      const wrap = el("div","stars");
      const k = clamp(Math.round(n), 0, 5);
      for(let i=1;i<=5;i++){
        wrap.appendChild(el("div", "star" + (i<=k ? " on": "")));
      }
      return wrap;
    }

    function uid(){ return Math.random().toString(16).slice(2) + Date.now().toString(16); }

    /***********************
     * Bank: M9 / M12
     * ï¼ˆDemo ç”¨ï¼šå…©å¥—ç¶­åº¦ä¸åŒï¼Œæ–¹ä¾¿æ¸¬å·®ç•°ï¼‰
     ***********************/
    const BANK = {
      M9: {
        name: "M9ï¼ˆè·å ´æ ¸å¿ƒèƒ½åŠ›ï¼‰",
        topics: [
          { key:"collab", label:"æºé€šå”ä½œ" },
          { key:"drive", label:"åŸ·è¡Œæ¨é€²" },
          { key:"solve", label:"å•é¡Œè§£æ±º" },
          { key:"lead",  label:"é ˜å°å¸¶äºº" }
        ],
        dims: [
          "æºé€šæ¸…æ™°","å”ä½œæ¨é€²","å…±è­˜å°é½Š","æå•æ¾„æ¸…",
          "å½±éŸ¿åŠ›","è¡çªè™•ç†","å›é¥‹å¸æ”¶","å”ä½œè¦å‰‡"
        ]
      },
      M12: {
        name: "M12ï¼ˆç®¡ç†/æˆé•·èƒ½åŠ›ï¼‰",
        topics: [
          { key:"plan", label:"ç­–ç•¥è¦åŠƒ" },
          { key:"biz",  label:"å•†æ¥­æ•æ„Ÿ" },
          { key:"ops",  label:"æµç¨‹æ²»ç†" },
          { key:"team", label:"äººæ‰åŸ¹è‚²" }
        ],
        dims: [
          "ç›®æ¨™æ‹†è§£","å„ªå…ˆé †åº","é¢¨éšªæ§ç®¡","è³‡æºå”èª¿",
          "æ•¸æ“šåˆ¤è®€","è·¨éƒ¨é–€æ¨å‹•","æµç¨‹è½åœ°","äººæ‰æ•™ç·´"
        ]
      }
    };

    /***********************
     * State
     ***********************/
    const app = document.getElementById("app");
    const buildText = document.getElementById("buildText");

    const STATE = {
      route: "home",
      model: "M9",              // M9 or M12
      topicKey: null,           // selected topic
      topicLabel: "",
      answered: 0,
      total: 8,
      draftId: null,            // per model+topic
      // 8 dummy answers (1..5)
      answers: Array(8).fill(null),
      // computed summary
      summary: null
    };

    function storageKeyBase(){
      return `m9m12_demo__${STATE.model}__${STATE.topicKey || "none"}`;
    }

    function setBuildLabel(){
      const modelName = BANK[STATE.model].name;
      buildText.textContent = `Build: ${BUILD.product} ${BUILD.version} ${BUILD.date} (${BUILD.buildNo}) Â· ${modelName}`;
      document.title = `M9/M12 Demo Â· ${BUILD.product} ${BUILD.version} Â· ${modelName}`;
    }

    /***********************
     * Navigation
     ***********************/
    function go(route){
      STATE.route = route;
      render();
    }

    function resetAll(){
      STATE.route="home";
      STATE.topicKey=null;
      STATE.topicLabel="";
      STATE.answered=0;
      STATE.total=8;
      STATE.draftId=null;
      STATE.answers = Array(8).fill(null);
      STATE.summary=null;
      render();
    }

    /***********************
     * Demo scoring
     ***********************/
    function computeSummary(){
      // Demoï¼šç”¨ answers ç”Ÿæˆ 8 å€‹ç¶­åº¦æ˜Ÿç­‰ï¼ˆ1..5ï¼‰
      const dims = BANK[STATE.model].dims.slice(0,8);

      // è‹¥æ²’å¡«ï¼Œçµ¦ä¸­é–“å€¼ 3
      const vals = STATE.answers.map(v => (v==null?3:v));

      // ä»¥å„é¡Œåˆ†é…åˆ°å„ç¶­åº¦ï¼ˆ1:1ï¼‰
      const perDim = dims.map((d, i) => ({ dim:d, score: clamp(vals[i],1,5) }));

      const avg = perDim.reduce((a,x)=>a+x.score,0)/perDim.length;
      const level = clamp(Math.round(avg),1,5);

      // æ‰¾æœ€ä½³/é¢¨éšª
      const sorted = [...perDim].sort((a,b)=>b.score-a.score);
      const best = sorted[0];
      const worst = sorted[sorted.length-1];

      const insight = [
        `æ´å¯Ÿ 1ï¼ˆå„ªå‹¢ï¼‰ï½œå„ªå‹¢åœ¨ã€Œ${best.dim}ã€ï¼šä½ é€šå¸¸èƒ½ç”¨æ›´æœ‰æ•ˆçš„æ–¹æ³•æ¨é€²ã€‚`,
        `æ´å¯Ÿ 2ï¼ˆé¢¨éšªï¼‰ï½œçŸ­æ¿åœ¨ã€Œ${worst.dim}ã€ï¼šé€™æ˜¯é€ æˆå¡é—œ/é‡å·¥çš„ä¸»è¦é¢¨éšªé»ã€‚`,
        `æ´å¯Ÿ 3ï¼ˆå‡ç´šï¼‰ï½œå…ˆæŠŠã€Œä¸€ä»¶äº‹åšåˆ°å¯é æœŸã€ï¼šç”¨å›ºå®šæµç¨‹è™•ç† 1â€“2 å€‹é«˜é »å•é¡Œã€‚`
      ];

      return {
        level,
        headline:
          level>=4 ? "é«˜å¯ç”¨ï½œå¯ç›´æ¥æ”¾å¤§è¤‡è£½" :
          level===3 ? "ä¸­ç­‰å¯ç”¨ï½œéœ€å»ºç«‹ä¸€è‡´æ–¹æ³•" :
          "é¢¨éšªåé«˜ï½œå…ˆä¿®æ­£é—œéµç¿’æ…£",
        confidence: 95,
        perDim,
        insight,
        action: "ä¸‹æ¬¡äº¤è¾¦å‰å…ˆå¯« 1 è¡Œã€Œç›®çš„/è¼¸å‡º/æˆªæ­¢æ™‚é–“ã€ä¸¦é™„ä¸€å€‹ç¯„ä¾‹ã€‚"
      };
    }

    /***********************
     * Draft (per model+topic, non-overwrite across topics)
     ***********************/
    function loadDraft(){
      if(!STATE.topicKey) return;
      const k = storageKeyBase() + "__draft";
      const raw = localStorage.getItem(k);
      if(!raw) return;

      try{
        const d = JSON.parse(raw);
        if(d && Array.isArray(d.answers)){
          STATE.answers = d.answers.slice(0,8);
          STATE.answered = STATE.answers.filter(v=>v!=null).length;
          STATE.draftId = d.draftId || null;
        }
      }catch(e){}
    }

    function saveDraft(){
      if(!STATE.topicKey) return;
      const k = storageKeyBase() + "__draft";
      const payload = {
        draftId: STATE.draftId || uid(),
        model: STATE.model,
        topicKey: STATE.topicKey,
        answers: STATE.answers
      };
      STATE.draftId = payload.draftId;
      localStorage.setItem(k, JSON.stringify(payload));
    }

    function clearDraft(){
      if(!STATE.topicKey) return;
      const k = storageKeyBase() + "__draft";
      localStorage.removeItem(k);
      STATE.answers = Array(8).fill(null);
      STATE.answered = 0;
      STATE.draftId = null;
      STATE.summary = null;
    }

    /***********************
     * UI blocks
     ***********************/
    function topNav({leftText, midText, rightText, onLeft, onRight}){
      const left = el("div","left", `â€¹ ${leftText || ""}`);
      const mid  = el("div","mid",  midText || "");
      const right= el("div","right", rightText || "");

      if(onLeft){
        left.style.pointerEvents="auto";
        left.addEventListener("click", onLeft);
      }
      if(onRight){
        right.style.pointerEvents="auto";
        right.addEventListener("click", onRight);
      }
      const bar = el("div","topnav", left, mid, right);
      return bar;
    }

    function renderHome(){
      const model = BANK[STATE.model];
      const topicChips = el("div","chips");

      model.topics.forEach(t=>{
        const c = el("div","chip" + (STATE.topicKey===t.key ? " active":""), t.label);
        c.addEventListener("click", ()=>{
          STATE.topicKey = t.key;
          STATE.topicLabel = t.label;
          // é¸ topic æ™‚ï¼Œè¼‰å…¥è©² topic çš„è‰ç¨¿ï¼ˆäº’ä¸è¦†è“‹ï¼‰
          STATE.answers = Array(8).fill(null);
          STATE.answered = 0;
          STATE.draftId = null;
          STATE.summary = null;
          loadDraft();
          render();
        });
        topicChips.appendChild(c);
      });

      const input = el("input","input");
      input.placeholder = "ä¾‹å¦‚ï¼šæºé€šå”ä½œ / å•é¡Œè§£æ±º";
      input.value = STATE.topicLabel || "";
      input.addEventListener("input", ()=>{
        STATE.topicLabel = input.value.trim();
      });

      const adv = el("div","rowlink",
        el("div","", "é€²éšè¨­å®š"),
        el("span","", "â€º")
      );
      adv.addEventListener("click", ()=>go("settings"));

      const illus = el("div","illus", el("div","plus","+"));

      const next = el("button","btn","ä¸‹ä¸€æ­¥");
      next.addEventListener("click", ()=>{
        if(!STATE.topicKey){
          // è‹¥æ²’é» chipï¼Œå…è¨±ç”¨è¼¸å…¥æ¡†é¸æœ€è¿‘ä¼¼ï¼ˆDemoï¼šç›´æ¥é¸ç¬¬ä¸€å€‹ï¼‰
          STATE.topicKey = model.topics[0].key;
          STATE.topicLabel = model.topics[0].label;
        }
        // é€²é¡Œç›®ï¼šåˆ†ä¸»é¡Œè‰ç¨¿ï¼ˆBANKB ç‰¹æ€§ï¼‰
        loadDraft();
        go("quiz");
      });

      const hint = el("div","hint",
        `æç¤ºï¼šé€™æ˜¯ Beta Demoï¼ˆç„¡å¾Œç«¯ï¼‰ã€‚è³‡æ–™åªå­˜åœ¨ä½ æœ¬æ©Ÿç€è¦½å™¨ï¼ˆå¯æ¸…é™¤ï¼‰ã€‚<br>` +
        `æ¯å€‹ä¸»é¡Œæœƒå„è‡ªä¿å­˜è‰ç¨¿ï¼ˆäº’ä¸è¦†è“‹ï¼‰ã€‚`
      );

      app.replaceChildren(
        topNav({leftText:"", midText:"", rightText:""}),
        el("h1","", "ä½ æƒ³ç›¤é»å“ªå€‹<br>è·å ´èƒ½åŠ›ï¼Ÿ"),
        el("p","", "åƒåšã€Œæ—…éŠæ›¸ã€ä¸€æ¨£ï¼Œ3â€“5 åˆ†é˜å®Œæˆç›¤é»ï¼Œç«‹å³æ‹¿åˆ°æ˜Ÿç­‰èˆ‡å»ºè­°ã€‚"),
        input,
        topicChips,
        adv,
        illus,
        next,
        hint
      );
    }

    function renderSettings(){
      const modelSel = el("div","card",
        el("div","meta",
          el("div","", "<b>æ¨¡å‹åˆ‡æ›</b>"),
          el("div","", "M9 / M12")
        )
      );

      const chips = el("div","chips");
      ["M9","M12"].forEach(k=>{
        const c = el("div","chip" + (STATE.model===k ? " active":""), BANK[k].name);
        c.addEventListener("click", ()=>{
          // åˆ‡æ¨¡å‹ï¼šä¸»é¡Œæ¸…ç©ºï¼Œé¿å…æ··ç”¨
          STATE.model = k;
          STATE.topicKey = null;
          STATE.topicLabel = "";
          STATE.answers = Array(8).fill(null);
          STATE.answered = 0;
          STATE.draftId = null;
          STATE.summary = null;
          setBuildLabel();
          render();
        });
        chips.appendChild(c);
      });

      modelSel.appendChild(chips);

      const explain = el("div","pillbox",
        "ç‚ºä»€éº¼è¦åš M9/M12 é›™æ¨¡å¼ï¼Ÿ<br>" +
        "â€¢ <b>M9</b>ï¼šåã€Œç¾å ´å¯ç”¨ã€çš„æ ¸å¿ƒè·å ´èƒ½åŠ›ï¼ˆæºé€š/æ¨é€²/è§£é¡Œ/å¸¶äººï¼‰ã€‚<br>" +
        "â€¢ <b>M12</b>ï¼šåã€Œæˆé•·èˆ‡ç®¡ç†ã€çš„èƒ½åŠ›ï¼ˆç­–ç•¥/å•†æ¥­/æµç¨‹/åŸ¹è‚²ï¼‰ã€‚<br>" +
        "ç”¨é€”ï¼šåŒä¸€å¥— UI/UX å¯ä»¥å¿«é€Ÿé©—è­‰å…©ç¨®å¸‚å ´å®šä½èˆ‡å ±å‘Šèªæ°£ï¼Œæ–¹ä¾¿ä½ è·Ÿæœ‹å‹åœ¨ä¸­åœ‹/å°ç£å…©ç«¯å°é½Šã€‚"
      );

      const back = el("button","btn secondary","è¿”å›");
      back.addEventListener("click", ()=>go("home"));

      app.replaceChildren(
        topNav({leftText:"è¿”å›", midText:"é€²éšè¨­å®š", rightText:"", onLeft: ()=>go("home")}),
        modelSel,
        explain,
        back
      );
    }

    function renderQuiz(){
      const model = BANK[STATE.model];

      const title = el("div","card",
        el("div","meta",
          el("div","", `<b>ä¸»é¡Œ</b><br>${STATE.topicLabel || model.topics.find(x=>x.key===STATE.topicKey)?.label || "-"}`),
          el("div","", `<b>é€²åº¦</b><br>${STATE.answered} / ${STATE.total}`)
        )
      );

      const qWrap = el("div","card");
      const dims = model.dims.slice(0,8);

      dims.forEach((dim, idx)=>{
        const row = el("div","row",
          el("div","label", `${idx+1}. ${dim}`),
          stars(STATE.answers[idx] ?? 0)
        );

        row.style.cursor="pointer";
        row.title="é»ä¸€ä¸‹ï¼šåœ¨ 1~5 æ˜Ÿé–“åˆ‡æ›ï¼ˆDemoï¼‰";
        row.addEventListener("click", ()=>{
          const cur = STATE.answers[idx] ?? 0;
          const next = (cur % 5) + 1; // 1..5
          STATE.answers[idx] = next;
          STATE.answered = STATE.answers.filter(v=>v!=null).length;
          saveDraft(); // BANKBï¼šæ¯æ¬¡é»é¸éƒ½ä¿å­˜è‰ç¨¿
          render();
        });

        qWrap.appendChild(row);
      });

      const confirm = el("button","btn","å®Œæˆå›è¦†");
      confirm.addEventListener("click", ()=>{
        saveDraft();
        go("confirm");
      });

      const restart = el("button","btn ghost","æ¸…é™¤è‰ç¨¿/é‡åš");
      restart.addEventListener("click", ()=>{
        clearDraft();
        render();
      });

      app.replaceChildren(
        topNav({leftText:"è¿”å›", midText:"ç›¤é»", rightText:"", onLeft: ()=>go("home")}),
        title,
        qWrap,
        confirm,
        restart,
        el("div","hint", "æ“ä½œï¼šé»æ¯ä¸€åˆ—å¯åœ¨ 1ï½5 æ˜Ÿé–“åˆ‡æ›ï¼ˆç¤ºç¯„ç”¨ï¼‰ã€‚")
      );
    }

    function renderConfirm(){
      const model = BANK[STATE.model];
      const card = el("div","card",
        el("div","meta",
          el("div","", "<b>å·²å›ç­”</b>"),
          el("div","", `${STATE.answered} / ${STATE.total}`)
        ),
        el("div","meta",
          el("div","", "<b>ä¸»é¡Œ</b>"),
          el("div","", (STATE.topicLabel || model.topics.find(x=>x.key===STATE.topicKey)?.label || "-"))
        )
      );

      const gen = el("button","btn","ç”Ÿæˆæˆ‘çš„çµæœ");
      gen.addEventListener("click", ()=>{
        // Demoï¼šå…©æ­¥èµ°ï¼ˆå…ˆç®—æ˜Ÿç­‰å†é¡¯ç¤ºæ‘˜è¦ï¼‰
        STATE.summary = computeSummary();
        saveDraft();
        go("summary");
      });

      const back = el("button","btn secondary","å›åˆ°ä¸Šä¸€é¡Œä¿®æ”¹");
      back.addEventListener("click", ()=>go("quiz"));

      app.replaceChildren(
        topNav({leftText:"è¿”å›", midText:"å®Œæˆ", rightText:"", onLeft: ()=>go("quiz")}),
        el("h1","", "å·²å®Œæˆå›ç­”ï¼Œ<br>è¦ç”Ÿæˆçµæœå—ï¼Ÿ"),
        el("p","", "ä½ å¯ä»¥å›åˆ°ä¸Šä¸€é¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”Ÿæˆæ˜Ÿç­‰èˆ‡æ´å¯Ÿã€‚"),
        card,
        gen,
        back,
        el("div","hint","ç”Ÿæˆåˆ†å…©æ­¥ï¼šå…ˆè¨ˆç®—æ˜Ÿç­‰ â†’ å†ç”Ÿæˆæ´å¯Ÿï¼ˆæ›´åƒå•†æ¥­å·¥å…·çš„å¯ä¿¡æµç¨‹ï¼‰ã€‚")
      );
    }

    function renderSummary(){
      const s = STATE.summary || computeSummary();
      const model = BANK[STATE.model];

      const card = el("div","card");

      const head = el("div","bigscore",
        el("div","n", String(s.level)),
        el("div","",
          el("div","txt", `${s.headline}`),
          stars(s.level),
          el("div","", `<div style="margin-top:6px;color:#64748B;font-weight:800;">å¯ä¿¡åº¦ï¼š${s.confidence}%ï¼ˆå·²å›ç­” ${STATE.answered}/${STATE.total}ï¼‰</div>`)
        )
      );

      card.appendChild(head);

      const list = el("div","list");
      s.perDim.forEach(x=>{
        list.appendChild(
          el("div","row",
            el("div","label", x.dim),
            stars(x.score)
          )
        );
      });
      card.appendChild(list);

      const insights = el("div","card",
        el("div","section-title","ä¸‰å€‹æ´å¯Ÿ"),
        el("div","pillbox", s.insight[0]),
        el("div","pillbox", s.insight[1]),
        el("div","pillbox", s.insight[2])
      );
      insights.querySelectorAll(".pillbox").forEach(x=>{ x.style.marginTop="10px"; });

      const action = el("div","card",
        el("div","section-title","ç«‹å³è¡Œå‹•ï¼ˆä»Šå¤©å°±èƒ½åšï¼‰"),
        el("div","pillbox", `<b>${s.action}</b>`)
      );

      const actions = el("div","actions2",
        el("button","btn","å±•é–‹å®Œæ•´ç‰ˆ"),
        el("button","btn secondary","åˆ†äº«æ‘˜è¦")
      );

      actions.children[0].addEventListener("click", ()=>go("full"));

      actions.children[1].addEventListener("click", async ()=>{
        const text =
`ã€M9/M12 Demo æ‘˜è¦ã€‘
æ¨¡å‹ï¼š${BANK[STATE.model].name}
ä¸»é¡Œï¼š${STATE.topicLabel || model.topics.find(x=>x.key===STATE.topicKey)?.label || "-"}
ç­‰ç´šï¼š${s.level} / 5ï¼ˆ${s.headline}ï¼‰
æ´å¯Ÿï¼š
- ${s.insight[0]}
- ${s.insight[1]}
- ${s.insight[2]}
è¡Œå‹•ï¼š${s.action}
Buildï¼š${BUILD.product} ${BUILD.version} ${BUILD.date} (${BUILD.buildNo})`;

        try{
          if(navigator.share){
            await navigator.share({ text });
          }else{
            await navigator.clipboard.writeText(text);
            alert("å·²è¤‡è£½æ‘˜è¦åˆ°å‰ªè²¼ç°¿");
          }
        }catch(e){
          // ignore
        }
      });

      const reset = el("button","btn ghost","æ¸…é™¤è‰ç¨¿/é‡åš");
      reset.addEventListener("click", ()=>{
        clearDraft();
        resetAll();
      });

      app.replaceChildren(
        topNav({leftText:"å›é¦–é ", midText:"çµæœæ‘˜è¦", rightText:"", onLeft: ()=>go("home")}),
        el("h1","", "ä½ çš„çµæœæ‘˜è¦"),
        el("p","", "å…ˆçœ‹é‡é»å¡ç‰‡ï¼Œå†æ±ºå®šè¦ä¸è¦å±•é–‹å®Œæ•´ç‰ˆã€‚"),
        card,
        insights,
        action,
        actions,
        reset,
        el("div","hint","å•†æ¥­åŒ–æ›é»ï¼šå®Œæ•´ç‰ˆå¯åŠ ã€Œ30 å¤©è¡Œå‹•è¨ˆç•«ã€ã€Œåœ˜éšŠå°ç…§ã€ã€Œé¡§å•è¨ªè«‡æç¶±ã€ã€‚")
      );
    }

    function renderFull(){
      const s = STATE.summary || computeSummary();
      const modelName = BANK[STATE.model].name;

      const doc = el("div","card",
        el("div","section-title","å®Œæ•´ç‰ˆï¼ˆç¤ºæ„ï¼‰"),
        el("div","pillbox",
          `æ¨¡å‹ï¼š<b>${modelName}</b><br>`+
          `ä¸»é¡Œï¼š<b>${STATE.topicLabel || "-"}</b><br>`+
          `ç­‰ç´šï¼š<b>${s.level}/5</b>ï¼ˆ${s.headline}ï¼‰<br><br>`+
          `é€™è£¡å¯æ“´å……ï¼š<br>`+
          `â€¢ 30 å¤©è¡Œå‹•è¨ˆç•«ï¼ˆæ¯é€± 2 å€‹å¾®ä»»å‹™ï¼‰<br>`+
          `â€¢ åœ˜éšŠå°ç…§ï¼šä¸»ç®¡/åŒå„•/ä¸‹å±¬äº’è©•å·®è·<br>`+
          `â€¢ é¡§å•ç”¨ï¼šè¨ªè«‡æç¶±èˆ‡è¿½å•æ¸…å–®<br>`+
          `â€¢ è¿½è¹¤ï¼š2 é€±å¾Œå†æ¸¬ä¸€æ¬¡ï¼ˆçœ‹æ”¹å–„æ›²ç·šï¼‰`
        )
      );

      const back = el("button","btn secondary","å›åˆ°æ‘˜è¦");
      back.addEventListener("click", ()=>go("summary"));

      const home = el("button","btn ghost","å›é¦–é ");
      home.addEventListener("click", ()=>go("home"));

      app.replaceChildren(
        topNav({leftText:"å›æ‘˜è¦", midText:"å®Œæ•´ç‰ˆ", rightText:"", onLeft: ()=>go("summary")}),
        doc,
        back,
        home
      );
    }

    function render(){
      setBuildLabel();

      switch(STATE.route){
        case "home":     return renderHome();
        case "settings": return renderSettings();
        case "quiz":     return renderQuiz();
        case "confirm":  return renderConfirm();
        case "summary":  return renderSummary();
        case "full":     return renderFull();
        default:         return renderHome();
      }
    }

    // start
    render();
  </script>
</body>
</html>
